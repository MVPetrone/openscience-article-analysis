---
title: "4_accessibility_methods"
output: html_document
date: "2025-07-23"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r, message=FALSE, warning=FALSE}
library(dplyr)
library(ggplot2)

# Load the data
data <- read.csv("data.csv")

# Percentage of Data Accessibility Methods
filtered_data <- data %>%
  filter(Is.there.data.explicitly.in.the.paper. == "Yes" &
           (Is.there.data.shared. == "Partially" |
              Is.there.data.shared. == "Fully"))

total_filtered_articles <- nrow(filtered_data)

if (total_filtered_articles > 0) {
  accessibility_method_percentages <- filtered_data %>%
    group_by(Data.accessibility.method) %>%
    summarise(count = n()) %>%
    mutate(percentage = (count / total_filtered_articles) * 100)
  
  print(accessibility_method_percentages)
} else {
  cat("No articles match the specified criteria for data accessibility methods.\n")
}

# Data Accessibility Method Bar Chart
if (exists("accessibility_method_percentages") &&
    nrow(accessibility_method_percentages) > 0) {
  ggplot(accessibility_method_percentages,
         aes(x = reorder(Data.accessibility.method, -percentage),
             y = percentage)) +
    geom_bar(stat = "identity", fill = "steelblue") +
    geom_text(aes(label = paste0(round(percentage, 1), "%")),
              vjust = -0.5,
              size = 3.5) +
    labs(title = "Percentage of Data Accessibility Methods",
         x = "Data Accessibility Method",
         y = "Percentage") +
    theme_minimal() +
    theme(axis.text.x = element_text(angle = 45, hjust = 1))
} else {
  cat("No data to plot for accessibility methods.\n")
}
```